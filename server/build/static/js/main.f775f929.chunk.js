(this.webpackJsonpzero_ecommerce=this.webpackJsonpzero_ecommerce||[]).push([[0],{28:function(e,t,a){e.exports=a(50)},33:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),c=a.n(l),o=(a(33),a(1)),i=a(2),s=a(4),u=a(5);function m(e){return"$ ".concat(Number(e).toFixed(1).toLocaleString()," ")}var d=a(10),p=a.n(d),E=a(12),f=a.n(E),v=a(13),h=a.n(v),O=a(3),b=a(8),C=a.n(b),y=a(14),g=a(11),_=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={product:null},e.openModal=function(t){e.setState({product:t})},e.closeModal=function(t){e.setState({product:null})},e.addToCartAndCloseModal=function(t){e.props.addToCart(e.state.product),e.closeModal()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchProducts()}},{key:"render",value:function(){var e=this,t=this.state.product,a=this.props,n=a.products,l=a.addToCart;return r.a.createElement("div",null,r.a.createElement(p.a,{bottom:!0,cascade:!0},n?r.a.createElement("ul",{className:"products"},n.map((function(t){return r.a.createElement("li",{key:t._id},r.a.createElement("div",{className:"product"},r.a.createElement("a",{href:"#".concat(t._id),onClick:function(a){return e.openModal(t)}},r.a.createElement("img",{src:t.image,alt:t.title}),r.a.createElement("p",null,t.title)),r.a.createElement("div",{className:"product-price"},r.a.createElement("div",null,m(t.price)),r.a.createElement("button",{onClick:function(e){return l(t)},className:"button primary"},"Add to Cart"))))}))):r.a.createElement("span",null,"...cargando")),t&&r.a.createElement(f.a,{isOpen:!0,onRequestClose:this.closeModal},r.a.createElement(h.a,null,r.a.createElement("button",{className:"close-modal",onClick:this.closeModal},"x"),r.a.createElement("div",{className:"product-details"},r.a.createElement("img",{src:t.image,alt:t.title}),r.a.createElement("div",{className:"product-details-description"},r.a.createElement("p",null,r.a.createElement("strong",null,t.title)),r.a.createElement("p",null,t.description),r.a.createElement("p",null,"Available Sizes:"," ",t.availableSizes.map((function(e){return r.a.createElement("span",null," ",r.a.createElement("button",{className:"button"},e))}))),r.a.createElement("div",{className:"product-price"},r.a.createElement("div",null,m(t.price)),r.a.createElement("button",{onClick:this.addToCartAndCloseModal,className:"button primary"},"Add to Cart")))))))}}]),a}(n.Component),N=Object(O.b)((function(e){return{products:e.products.filtered}}),{fetchProducts:function(e){return function(){var e=Object(y.a)(C.a.mark((function e(t){var a,n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/products");case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,r=n.payload,t({type:"FETCH_PRODUCTS",payload:r.products});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},addToCart:function(e){return function(t,a){var n=a().cart.cartItems.slice(),r=!1;n.forEach((function(t){t._id===e._id&&(t.count++,r=!0)})),r||n.push(Object(g.a)({},e,{count:1})),t({type:"ADD_TO_CART",payload:{cartItems:n}}),localStorage.setItem("cartItems",JSON.stringify(n))}}})(_),R=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(){console.log(this.state,this.props)}},{key:"render",value:function(){var e=this.props,t=e.products,a=e.filtered,n=e.sort,l=e.size,c=e.filterProducts,o=e.sortProducts;return t?r.a.createElement("div",{className:"filter"},r.a.createElement("div",{className:"result-result"},a.length," Products"),r.a.createElement("div",{className:"filter-sort"}," Order ",r.a.createElement("select",{value:n,onChange:function(e){return o(a,e.target.value)}},r.a.createElement("option",{value:"latest"},"Latest"),r.a.createElement("option",{value:"lowest"},"Lowest"),r.a.createElement("option",{value:"highest"},"Highest"))),r.a.createElement("div",{className:"filter-size"}," Filter ",r.a.createElement("select",{value:l,onChange:function(e){return c(t,e.target.value)}},r.a.createElement("option",{value:""},"ALL"),r.a.createElement("option",{value:"XS"},"XS"),r.a.createElement("option",{value:"S"},"S"),r.a.createElement("option",{value:"M"},"M"),r.a.createElement("option",{value:"L"},"L"),r.a.createElement("option",{value:"XL"},"XL"),r.a.createElement("option",{value:"XXL"},"XXL")))):r.a.createElement("div",null,"...loading")}}]),a}(n.Component),S=Object(O.b)((function(e){return{size:e.products.size,sort:e.products.sort,products:e.products.items,filtered:e.products.filtered}}),{filterProducts:function(e,t){return function(a){var n=""===t?e:e.filter((function(e){return e.availableSizes.includes(t)}));a({type:"FILTER_PRODUCTS_BY_SIZE",payload:{size:t,items:n}})}},sortProducts:function(e,t){return function(a){var n=null;switch(t){case"lowest":n=function(e,t){return e.price-t.price};break;case"highest":n=function(e,t){return t.price-e.price};break;default:n=function(e,t){return e._id-t._id}}var r=e.slice().sort(n);a({type:"ORDER_PRODUCTS_BY_PRICE",payload:{sort:t,items:r}})}}})(R),I=a(15),j=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={name:"",email:"",address:"",showCheckout:!1},e.toggleFormCheckout=function(t){return e.setState((function(e){return{showCheckout:!e.showCheckout}}),(function(e){return console.log("toggle checkout form")}))},e.closeModal=function(t){e.props.clearOrder()},e.handleInput=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(I.a)({},n,r))},e.createOrder=function(t){t.preventDefault();var a={name:e.state.name,email:e.state.email,address:e.state.address,cartItems:e.props.cartItems,total:e.props.cartItems.reduce((function(e,t){return t.price*t.count+e}),0)};e.props.createOrder(a)},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state.showCheckout,a=this.props,n=a.cartItems,l=a.removeFromCart,c=a.order,o=n.reduce((function(e,t){return t.price*t.count+e}),0);return r.a.createElement("div",null,r.a.createElement("div",{className:"cart cart-header"},0===n.length?"Cart is empty":"You have ".concat(n.length," items in the cart ")),c&&r.a.createElement(f.a,{isOpen:!0,onRequestClose:this.closeModal},r.a.createElement(h.a,null,r.a.createElement("button",{onClick:this.closeModal,className:"close-modal"},"x"),r.a.createElement("div",{className:"order-details"},r.a.createElement("h3",{className:"success-message"},"Your order has been placed."),r.a.createElement("h2",null,"Order ",c._id),r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("div",null,"Name: "),r.a.createElement("div",null,c.name)),r.a.createElement("li",null,r.a.createElement("div",null,"Email: "),r.a.createElement("div",null,c.email)),r.a.createElement("li",null,r.a.createElement("div",null,"Address: "),r.a.createElement("div",null,c.address)),r.a.createElement("li",null,r.a.createElement("div",null,"Total: "),r.a.createElement("div",null,m(c.total))),r.a.createElement("li",null,r.a.createElement("div",null,"Items: "),r.a.createElement("div",null,c.cartItems.map((function(e){return r.a.createElement("div",{key:e._id},e.count," ","x"," ",e.title," ")})))))))),r.a.createElement("div",null,r.a.createElement("div",{className:"cart"},r.a.createElement(p.a,{left:!0,cascade:!0},r.a.createElement("ul",{className:"cart-items"},n.map((function(e){return r.a.createElement("li",{key:e._id},r.a.createElement("div",null,r.a.createElement("img",{src:e.image,alt:e.title})),r.a.createElement("div",null,r.a.createElement("div",null,e.title),r.a.createElement("div",{className:"right"},m(e.price)," x ",e.count," ",r.a.createElement("button",{className:"button",onClick:function(t){return l(e)}},"Remove"))))}))))),n.length>0&&r.a.createElement("div",{className:"cart"},r.a.createElement("div",{className:"total"},r.a.createElement("div",null,"Total:"," ",m(o)),r.a.createElement("button",{onClick:function(t){return e.toggleFormCheckout()},className:"button primary"},"Proceed"))),t&&r.a.createElement(p.a,{right:!0,cascade:!0},r.a.createElement("div",{className:"cart"},r.a.createElement("form",{onSubmit:this.createOrder},r.a.createElement("ul",{className:"form-container"},r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{id:"email",name:"email",type:"email",required:!0,onChange:this.handleInput})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{id:"name",name:"name",type:"text",required:!0,onChange:this.handleInput})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"address"},"Address"),r.a.createElement("input",{id:"address",name:"address",type:"text",required:!0,onChange:this.handleInput})),r.a.createElement("li",null,r.a.createElement("button",{className:"button primary"},"Checkout"))))))))}}]),a}(n.Component),k=Object(O.b)((function(e){return{order:e.order.order,cartItems:e.cart.cartItems}}),{removeFromCart:function(e){return function(t,a){var n=a().cart.cartItems.slice().filter((function(t){return t._id!==e._id}));t({type:"REMOVE_FROM_CART",payload:{cartItems:n}}),localStorage.setItem("cartItems",JSON.stringify(n))}},createOrder:function(e){return function(){var t=Object(y.a)(C.a.mark((function t(a){var n,r;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 2:return n=t.sent,t.next=5,n.json();case 5:r=t.sent,console.log(r),a({type:"CREATE_ORDER",payload:r.payload}),localStorage.clear("cartItems"),a({type:"CLEAR_CART"});case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},clearOrder:function(e){return function(e){e({type:"CLEAR_ORDER"})}}})(j),T=a(6),A=a(27),w=Object(T.c)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_PRODUCTS":return{items:t.payload,filtered:t.payload};case"FILTER_PRODUCTS_BY_SIZE":return Object(g.a)({},e,{size:t.payload.size,filtered:t.payload.items});case"ORDER_PRODUCTS_BY_PRICE":return Object(g.a)({},e,{sort:t.payload.sort,filtered:t.payload.items});default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{cartItems:JSON.parse(localStorage.getItem("cartItems"))||[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TO_CART":case"REMOVE_FROM_CART":return{cartItems:t.payload.cartItems};default:return e}},order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_ORDER":return{order:t.payload};case"CLEAR_ORDER":return{order:null};default:return e}}}),D=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||T.d,M=Object(T.e)(w,{},D(Object(T.a)(A.a))),P=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(O.a,{store:M},r.a.createElement("div",{className:"grid-container"},r.a.createElement("header",null,r.a.createElement("a",{href:"http://localhost:3000"},"React Shopping Cart")),r.a.createElement("main",null,r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"main"},r.a.createElement(S,null),r.a.createElement(N,null)),r.a.createElement("div",{className:"sidebar"},r.a.createElement(k,null)))),r.a.createElement("footer",null,"All right is reserved.")))}}]),a}(n.Component);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(P,null)),document.getElementById("root"))}},[[28,1,2]]]);